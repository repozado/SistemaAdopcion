<div class="admin-container">
  <div class="card-header">
    <i class="fas fa-user-cog"></i>
    <h3>Panel de Administración</h3>
  </div>

  <!-- Filtros y búsqueda -->
  <div class="admin-toolbar">
    <div class="search-group">
      <input type="text" class="form-control" placeholder="Buscar mascotas..." [(ngModel)]="searchTerm">
      <button class="btn btn-primary">
        <i class="fas fa-search"></i>
      </button>
    </div>
    
    <div class="filter-group">
      <select class="form-control" [(ngModel)]="selectedFilter">
        <option value="">Todas las mascotas</option>
        <option *ngFor="let filter of filters" [value]="filter.value">{{filter.label}}</option>
      </select>
    </div>
    
    <button class="btn btn-primary" (click)="openAddModal()">
      <i class="fas fa-plus"></i> Añadir Mascota
    </button>
  </div>

  <!-- Tabla de mascotas -->
  <div class="admin-table-container">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Mascota</th>
          <th>Perfil Emocional</th>
          <th>Especie</th>
          <th>Edad</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let mascota of filteredMascotas">
          <td>
            <div class="pet-info-cell">
              <div class="pet-avatar" [ngClass]="{'dog': mascota.type === 'Perro', 'cat': mascota.type === 'Gato'}">
                <i [class]="mascota.image"></i>
              </div>
              <div>
                <strong>{{mascota.name}}</strong>
                <small>{{mascota.size}}</small>
              </div>
            </div>
          </td>
          <td>{{mascota.emotionalProfile}}</td>
          <td>{{mascota.type}}</td>
          <td>{{mascota.age}} años</td>
          <td>
            <span [ngClass]="{
              'status-available': mascota.status === 'Disponible',
              'status-pending': mascota.status === 'En proceso',
              'status-adopted': mascota.status === 'Adoptado'
            }">
              {{mascota.status}}
            </span>
          </td>
          <td>
            <div class="action-buttons">
              <button class="action-btn edit-btn" (click)="openEditModal(mascota)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="action-btn delete-btn" (click)="confirmDelete(mascota.id)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginación -->
  <div class="pagination" *ngIf="filteredMascotas.length > itemsPerPage">
    <button class="btn btn-outline" [disabled]="currentPage === 1" (click)="prevPage()">
      <i class="fas fa-chevron-left"></i>
    </button>
    <span>Página {{currentPage}} de {{totalPages}}</span>
    <button class="btn btn-outline" [disabled]="currentPage === totalPages" (click)="nextPage()">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>

  <!-- Modal para añadir/editar -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{isEditing ? 'Editar Mascota' : 'Añadir Nueva Mascota'}}</h3>
        <button class="close-btn" (click)="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="handleSubmit()">
          <div class="form-row">
            <div class="form-group">
              <label>Nombre *</label>
              <input type="text" class="form-control" [(ngModel)]="currentMascota.name" name="name" required>
            </div>
            <div class="form-group">
              <label>Tipo *</label>
              <select class="form-control" [(ngModel)]="currentMascota.type" name="type" required>
                <option value="Perro">Perro</option>
                <option value="Gato">Gato</option>
                <option value="Otro">Otro</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Edad *</label>
              <input type="number" class="form-control" [(ngModel)]="currentMascota.age" name="age" required>
            </div>
            <div class="form-group">
              <label>Tamaño *</label>
              <select class="form-control" [(ngModel)]="currentMascota.size" name="size" required>
                <option value="Pequeño">Pequeño</option>
                <option value="Mediano">Mediano</option>
                <option value="Grande">Grande</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Sexo *</label>
              <select class="form-control" [(ngModel)]="currentMascota.sexo" name="sex" required>
                <option value="Macho">Macho</option>
                <option value="Hembra">Hembra</option>
              </select>
            </div>
            <div class="form-group">
              <label>Estado *</label>
              <select class="form-control" [(ngModel)]="currentMascota.status" name="status" required>
                <option value="Disponible">Disponible</option>
                <option value="En proceso">En proceso</option>
                <option value="Adoptado">Adoptado</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Perfil Emocional *</label>
            <select class="form-control" [(ngModel)]="currentMascota.emotionalProfile" name="emotionalProfile" required>
              <option value="Aventurero">Aventurero</option>
              <option value="Tranquilo">Tranquilo</option>
              <option value="Juguetón">Juguetón</option>
              <option value="Sociable">Sociable</option>
              <option value="Independiente">Independiente</option>
            </select>
          </div>

          <div class="form-group">
            <label>Descripción *</label>
            <textarea class="form-control" rows="3" [(ngModel)]="currentMascota.description" name="description" required></textarea>
          </div>

          <div class="form-group">
            <label>Requerimientos</label>
            <textarea class="form-control" rows="2" [(ngModel)]="currentMascota.requerimientos" name="requerimientos"></textarea>
          </div>

          <div class="form-group">
            <label>Compatibilidad (%)</label>
            <input type="number" min="0" max="100" class="form-control" [(ngModel)]="currentMascota.compatibility" name="compatibility">
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-outline" (click)="closeModal()">Cancelar</button>
            <button type="submit" class="btn btn-primary">
              {{isEditing ? 'Actualizar' : 'Guardar'}}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal de confirmación -->
  <div class="modal" *ngIf="showConfirmModal">
    <div class="modal-content confirm-modal">
      <div class="modal-header">
        <h3>Confirmar Eliminación</h3>
      </div>
      <div class="modal-body">
        <p>¿Estás seguro que deseas eliminar a {{mascotaToDelete?.name}}?</p>
        <p>Esta acción no se puede deshacer.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" (click)="showConfirmModal = false">Cancelar</button>
        <button class="btn btn-danger" (click)="deleteMascota()">Eliminar</button>
      </div>
    </div>
  </div>
</div>